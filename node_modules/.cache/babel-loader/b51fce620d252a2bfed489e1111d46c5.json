{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar initialState = [{\n  bookFile: \"\"\n}];\n\nvar sendImage =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(file) {\n    var image, fetchConf, response, body;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            image = new FormData();\n            image.append('image', file);\n            fetchConf = {\n              method: 'POST',\n              files: image,\n              body: image,\n              cache: 'default'\n            };\n            _context.next = 5;\n            return fetch('http://localhost:2000/upload', fetchConf);\n\n          case 5:\n            response = _context.sent;\n            _context.next = 8;\n            return response.json();\n\n          case 8:\n            body = _context.sent;\n            if (response.status !== 200) console.log('Error', body);\n            console.log('Imageuploader body', body);\n            return _context.abrupt(\"return\", body.images);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function sendImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport var imageUploader = function imageUploader() {\n  return function (data, dispatch) {\n    console.log('data before', data);\n    sendImage(data).then(function (res) {\n      return res;\n    }).then(function (data) {\n      console.log('data after', data);\n      dispatch({\n        type: 'IMAGE_SUCCESS',\n        payload: data[0].url\n      });\n    });\n  };\n};","map":{"version":3,"sources":["F:\\node\\react_bookshelf\\src\\actions\\imageUploader.js"],"names":["initialState","bookFile","sendImage","file","image","FormData","append","fetchConf","method","files","body","cache","fetch","response","json","status","console","log","images","imageUploader","data","dispatch","then","res","type","payload","url"],"mappings":";;AAAA,IAAMA,YAAY,GAAG,CACrB;AACEC,EAAAA,QAAQ,EAAE;AADZ,CADqB,CAArB;;AAOA,IAAMC,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZC,YAAAA,KADY,GACJ,IAAIC,QAAJ,EADI;AAEdD,YAAAA,KAAK,CAACE,MAAN,CAAa,OAAb,EAAsBH,IAAtB;AACEI,YAAAA,SAHY,GAGA;AAAEC,cAAAA,MAAM,EAAE,MAAV;AACfC,cAAAA,KAAK,EAAEL,KADQ;AAEfM,cAAAA,IAAI,EAAEN,KAFS;AAGfO,cAAAA,KAAK,EAAE;AAHQ,aAHA;AAAA;AAAA,mBAOQC,KAAK,CAAC,8BAAD,EAAiCL,SAAjC,CAPb;;AAAA;AAOTM,YAAAA,QAPS;AAAA;AAAA,mBAQCA,QAAQ,CAACC,IAAT,EARD;;AAAA;AAQZJ,YAAAA,IARY;AASlB,gBAAIG,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6BC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAsBP,IAAtB;AAC7BM,YAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCP,IAAlC;AAVkB,6CAWVA,IAAI,CAACQ,MAXK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAThB,SAAS;AAAA;AAAA;AAAA,GAAf;;AAcC,OAAO,IAAMiB,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,UAACC,IAAD,EAAOC,QAAP,EAAoB;AACrDL,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BG,IAA3B;AACFlB,IAAAA,SAAS,CAACkB,IAAD,CAAT,CAAgBE,IAAhB,CAAqB,UAAAC,GAAG,EAAG;AACvB,aAAOA,GAAP;AACD,KAFH,EAEKD,IAFL,CAEU,UAAAF,IAAI,EAAG;AACbJ,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BG,IAA1B;AACEC,MAAAA,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAE,eAAR;AAAyBC,QAAAA,OAAO,EAAEL,IAAI,CAAC,CAAD,CAAJ,CAAQM;AAA1C,OAAD,CAAR;AACL,KALD;AAMC,GAR4B;AAAA,CAAtB","sourcesContent":["const initialState = [\r\n{\r\n  bookFile: \"\",\r\n}\r\n];\r\n\r\n\r\nconst sendImage = async (file) => {\r\n  let image = new FormData();\r\n    image.append('image', file)\r\n  var fetchConf = { method: 'POST',\r\n   files: image,\r\n   body: image,\r\n   cache: 'default' };\r\n   const response = await fetch('http://localhost:2000/upload', fetchConf);\r\nconst body = await response.json();\r\nif (response.status !== 200) console.log('Error' , body);\r\nconsole.log('Imageuploader body', body);\r\n return body.images; };\r\n\r\n\r\n export const imageUploader = () => (data, dispatch) => {\r\n   console.log('data before', data);\r\n sendImage(data).then(res =>{\r\n     return res\r\n   }).then(data =>{\r\n     console.log('data after', data);\r\n       dispatch({ type: 'IMAGE_SUCCESS', payload: data[0].url })\r\n })\r\n }\r\n"]},"metadata":{},"sourceType":"module"}