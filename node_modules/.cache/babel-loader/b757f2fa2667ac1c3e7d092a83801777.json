{"ast":null,"code":"import _defineProperty from \"F:\\\\node\\\\React-Redux-filters\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"F:\\\\node\\\\React-Redux-filters\\\\src\\\\App.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { getCards } from './actions/getcards';\nimport convert_quarter_string from './js/convert_quarter_string';\nimport './cssfiles.js';\nimport LoopHeading from './fields.js';\nimport FontAwesome from 'react-fontawesome';\nimport './components/dropdown/styles/global.css';\nimport PlaceIcon from \"./css/placeholder.svg\";\nimport PriceIcon from \"./css/price-tag.svg\";\nimport ReduceIcon from \"./css/reduce.svg\";\nimport CountingIcon from \"./css/counting.svg\";\nimport MoneyIcon from './css/MoneyIcon';\nimport CalendarIcon from './css/CalendarIcon';\nimport SingleDropdown from './SingleDropdown';\nimport SingleDropdownMobile from './SingleDropdownMobile';\n\nvar App = function App(_ref) {\n  var _React$createElement;\n\n  var cards = _ref.cards,\n      filterTypes = _ref.filterTypes,\n      onFindCard = _ref.onFindCard,\n      onGetCards = _ref.onGetCards,\n      onToggleMobile = _ref.onToggleMobile,\n      onSelectedDistrict = _ref.onSelectedDistrict,\n      onSelectedPrice = _ref.onSelectedPrice,\n      onToggleList = _ref.onToggleList,\n      ownProps = _ref.ownProps;\n  var searchInput = '';\n  var mobileOpen = false;\n\n  var findCard = function findCard() {\n    onFindCard(searchInput.value);\n  };\n\n  var toggleList = function toggleList(ev, name) {\n    onToggleList(name);\n  };\n\n  var toggleMobile = function toggleMobile(ev, name) {\n    onToggleMobile(name);\n  };\n\n  var selectedDistrict = function selectedDistrict(id, key, value) {\n    onSelectedDistrict(id, key, value);\n  };\n\n  var selectedPrice = function selectedPrice(id, key, value) {\n    onSelectedPrice(id, key, value);\n  };\n\n  var image_Style = function image_Style(a) {\n    return {\n      backgroundSize: \"cover\",\n      display: \"block\",\n      height: \"100%\",\n      backgroundImage: \"url(/uploads/\" + a + \")\"\n    };\n  };\n\n  return React.createElement(\"div\", {\n    className: \"Cards\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"fields\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row blueb\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12 col-xs-12 flex cardsearch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    onChange: findCard,\n    ref: function ref(input) {\n      searchInput = input;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: findCard,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \" \", React.createElement(\"img\", {\n    alt: \"search\",\n    src: \"/brief/magnifying-glass.svg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), \" \")), React.createElement(\"div\", {\n    className: \"dropdown_menu onlydesk\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(SingleDropdown, {\n    filterTypes: filterTypes,\n    Icon: PlaceIcon,\n    toggleList: toggleList,\n    selectedOption: selectedDistrict,\n    field: \"districts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(SingleDropdown, {\n    filterTypes: filterTypes,\n    Icon: PriceIcon,\n    toggleList: toggleList,\n    selectedOption: selectedPrice,\n    field: \"prices\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }), React.createElement(SingleDropdown, {\n    filterTypes: filterTypes,\n    Icon: ReduceIcon,\n    toggleList: toggleList,\n    selectedOption: selectedDistrict,\n    field: \"spaces\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(SingleDropdown, {\n    filterTypes: filterTypes,\n    Icon: CountingIcon,\n    toggleList: toggleList,\n    selectedOption: selectedDistrict,\n    field: \"rooms\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"dropdown_proto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  })))), React.createElement(LoopHeading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"mobile_filters onlymob\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"button\", (_React$createElement = {\n    className: filterTypes.toggleMobile ? 'toggled btn' : 'untoggled btn',\n    onClick: function onClick(ev) {\n      return toggleMobile(ev, filterTypes.mobileOpen);\n    }\n  }, _defineProperty(_React$createElement, \"className\", \"btn\"), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 55\n  }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement), \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\", React.createElement(FontAwesome, {\n    name: \"filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"dropdown_menu onlymob\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(FontAwesome, {\n    name: \"times\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"dropdown_bearer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12 col-xs-12 flex cardsearch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u041F\\u043E\\u0438\\u0441\\u043A\",\n    onChange: findCard,\n    ref: function ref(input) {\n      searchInput = input;\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: findCard,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    alt: \"search\",\n    src: \"/brief/magnifying-glass.svg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), \" \")), React.createElement(\"div\", {\n    className: \"mobile_filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"  \", React.createElement(SingleDropdownMobile, {\n    filterTypes: filterTypes,\n    Icon: PlaceIcon,\n    toggleList: toggleList,\n    selectedOption: selectedDistrict,\n    field: \"districts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), \"    \"), React.createElement(\"div\", {\n    className: \"mobile_filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"  \", React.createElement(SingleDropdownMobile, {\n    filterTypes: filterTypes,\n    Icon: PriceIcon,\n    toggleList: toggleList,\n    selectedOption: selectedPrice,\n    field: \"prices\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), \"    \"), React.createElement(\"div\", {\n    className: \"mobile_filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"  \", React.createElement(SingleDropdownMobile, {\n    filterTypes: filterTypes,\n    Icon: ReduceIcon,\n    toggleList: toggleList,\n    selectedOption: selectedDistrict,\n    field: \"spaces\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), \"    \"), React.createElement(\"div\", {\n    className: \"mobile_filter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"  \", React.createElement(SingleDropdownMobile, {\n    filterTypes: filterTypes,\n    Icon: CountingIcon,\n    toggleList: toggleList,\n    selectedOption: selectedDistrict,\n    field: \"rooms\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), \"    \"), React.createElement(\"button\", {\n    className: \"search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u0438\\u0441\\u043A\"))), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, cards.map(function (card, index) {\n    return React.createElement(\"div\", {\n      key: index,\n      className: \"col-md-3 col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"el_card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"image_c\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: '/doma/' + card.page_link,\n      style: image_Style(card.home_background),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"panel bordered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"installments_icon\",\n      id: \"installments_icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"search\",\n      src: \"/brief/icons8-money-52.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), React.createElement(\"a\", {\n      href: \"/doma/zhknagagarinskomplato\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, card.title), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \" \", card.address), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"svg_price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(MoneyIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    })), React.createElement(\"span\", {\n      className: \"bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u043E\\u0442 \", card.prices_start_at_per_meter, \"  \\u0443.\\u0435./\\u043C\", React.createElement(\"sup\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"2\"))), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"svg_calendar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(CalendarIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), \" \"), convert_quarter_string(card.house_deploy_date)), \"\\u0423\\u0437\\u043D\\u0430\\u0442\\u044C \\u043F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435 \", React.createElement(\"i\", {\n      className: \"fa fa-arrow-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }))))));\n  }))), React.createElement(\"div\", {\n    style: {\n      display: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    id: \"getcard\",\n    onClick: onGetCards,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Get cards\")));\n};\n\nvar undef_or_NaN = function undef_or_NaN(el) {\n  if (el === 'NaN') return true;\n\n  if (isNaN(el) && typeof el === 'undefined') {\n    return true;\n  }\n\n  return false;\n};\n\nvar correct_choice = function correct_choice() {\n  var chosen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var i = arguments.length > 1 ? arguments[1] : undefined;\n  if (i.selected !== false) if (typeof i.value === 'string') chosen.push(i.value);else chosen = i.value;\n  return chosen;\n};\n\nvar districtsFilter = function districtsFilter(state, card) {\n  var chosen;\n  chosen = [];\n  state.lists.filterTypes.districts.options.forEach(function (i) {\n    if (i.selected !== false) if (typeof i.value === 'string') {\n      chosen.push(i.value);\n    } else {\n      chosen = i.value;\n    }\n  });\n  return Boolean(chosen.includes(card.block));\n};\n\nvar priceFilter = function priceFilter(state, card) {\n  var chosen = [];\n  state.lists.filterTypes.prices.options.map(function (i) {\n    chosen = correct_choice(chosen, i);\n  });\n  var bool = Number(JSON.parse(card.prices)[1].text) < chosen[1];\n  return bool;\n};\n\nvar correctNumber = function correctNumber(incorrectNum) {\n  if (!undef_or_NaN(incorrectNum)) return Number(incorrectNum.replace(',', '.'));else return incorrectNum;\n};\n\nvar spaceFilter = function spaceFilter(state, card) {\n  var chosen = [];\n  state.lists.filterTypes.spaces.options.map(function (i) {\n    if (i.selected !== false) {\n      chosen.push(i.value);\n    }\n  });\n  var bool = false;\n  var prices = JSON.parse(card.prices);\n  var spaces = [correctNumber(prices[0].text), correctNumber(prices[2].text), correctNumber(prices[4].text)];\n\n  if (chosen.length === 1) {\n    if (chosen[0][0] < spaces[0] && spaces[0] < chosen[0][1]) bool = true;\n    if (chosen[0][0] < spaces[1] && spaces[1] < chosen[0][1]) bool = true;\n    if (chosen[0][0] < spaces[2] && spaces[2] < chosen[0][1]) bool = true;\n    if (undef_or_NaN(spaces[0]) || undef_or_NaN(spaces[1]) || undef_or_NaN(spaces[2])) bool = true;\n\n    if (!bool) {\n      console.log(chosen[0][0], '<', spaces[0], '&&', spaces[0], '<', chosen[1]);\n    }\n  } else {\n    chosen.map(function (e) {\n      if (e[0] < spaces[0] && spaces[0] < e[1]) bool = true;\n      if (e[0] < spaces[1] && spaces[1] < e[1]) bool = true;\n      if (e[0] < spaces[2] && spaces[2] < e[1]) bool = true;\n      if (undef_or_NaN(spaces[0]) || undef_or_NaN(spaces[1]) || undef_or_NaN(spaces[2])) bool = true;\n    });\n  }\n\n  return bool;\n};\n\nvar roomFilter = function roomFilter(state, card) {\n  var chosen = [];\n  var availability = {};\n  var prices = JSON.parse(card.prices);\n  state.lists.filterTypes.rooms.options.map(function (i) {\n    if (i.selected !== false) if (i.value.length < 2) chosen.push(i.value);else chosen = i.value;\n  });\n  isNaN(correctNumber(prices[0].text)) || isNaN(correctNumber(prices[1].text)) ? availability[0] = false : availability[0] = true;\n  isNaN(correctNumber(prices[2].text)) || isNaN(correctNumber(prices[3].text)) ? availability[1] = false : availability[1] = true;\n  isNaN(correctNumber(prices[4].text)) || isNaN(correctNumber(prices[5].text)) ? availability[2] = false : availability[2] = true;\n  var bool = false;\n\n  for (var prop in chosen) {\n    if (availability[chosen[prop] - 1] === true) bool = true;\n  }\n\n  if (!bool) {\n    console.log(card.title, availability);\n  }\n\n  return bool;\n};\n\nexport default connect(function (state, ownProps) {\n  return {\n    cards: state.cards.filter(function (card) {\n      return card.note_type === 'Объект' && card.title.toLowerCase().includes(state.filterCards.toLowerCase()) && districtsFilter(state, card) && priceFilter(state, card) && spaceFilter(state, card) && roomFilter(state, card);\n    }),\n    filterTypes: state.lists.filterTypes,\n    ownProps: ownProps\n  };\n}, function (dispatch) {\n  return {\n    onFindCard: function onFindCard(task) {\n      dispatch({\n        type: 'FIND_CARD',\n        payload: task\n      });\n    },\n    onGetCards: function onGetCards() {\n      dispatch(getCards());\n    },\n    onToggleList: function onToggleList(payload) {\n      dispatch({\n        type: 'TOGGLE_LIST',\n        payload: payload\n      });\n    },\n    onToggleMobile: function onToggleMobile(name) {\n      dispatch({\n        type: 'TOGGLE_MOBILE',\n        payload: name\n      });\n    },\n    onSelectedDistrict: function onSelectedDistrict(id, key, value) {\n      dispatch({\n        type: 'TOGGLE_SELECTED_ITEM',\n        payload: {\n          id: id,\n          key: key\n        }\n      });\n      dispatch({\n        type: 'FILTER_BY_LISTS',\n        payload: {\n          id: id,\n          value: value\n        }\n      });\n    },\n    onSelectedPrice: function onSelectedPrice(id, key, value) {\n      dispatch({\n        type: 'TOGGLE_SELECTED_ITEM',\n        payload: {\n          id: id,\n          key: key\n        }\n      });\n    }\n  };\n})(App);","map":{"version":3,"sources":["F:\\node\\React-Redux-filters\\src\\App.js"],"names":["React","connect","getCards","convert_quarter_string","LoopHeading","FontAwesome","MoneyIcon","CalendarIcon","SingleDropdown","SingleDropdownMobile","App","cards","filterTypes","onFindCard","onGetCards","onToggleMobile","onSelectedDistrict","onSelectedPrice","onToggleList","ownProps","searchInput","mobileOpen","findCard","value","toggleList","ev","name","toggleMobile","selectedDistrict","id","key","selectedPrice","image_Style","a","backgroundSize","display","height","backgroundImage","input","PlaceIcon","PriceIcon","ReduceIcon","CountingIcon","map","card","index","page_link","home_background","title","address","prices_start_at_per_meter","house_deploy_date","undef_or_NaN","el","isNaN","correct_choice","chosen","i","selected","push","districtsFilter","state","lists","districts","options","forEach","Boolean","includes","block","priceFilter","prices","bool","Number","JSON","parse","text","correctNumber","incorrectNum","replace","spaceFilter","spaces","length","console","log","e","roomFilter","availability","rooms","prop","filter","note_type","toLowerCase","filterCards","dispatch","task","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getCards } from './actions/getcards';\r\nimport convert_quarter_string from './js/convert_quarter_string';\r\nimport './cssfiles.js'\r\nimport LoopHeading from './fields.js'\r\nimport FontAwesome from 'react-fontawesome';\r\nimport './components/dropdown/styles/global.css';\r\nimport PlaceIcon from './css/placeholder.svg';\r\nimport PriceIcon from './css/price-tag.svg';\r\nimport ReduceIcon from './css/reduce.svg';\r\nimport CountingIcon from './css/counting.svg';\r\nimport MoneyIcon from './css/MoneyIcon';\r\nimport CalendarIcon from './css/CalendarIcon';\r\n\r\nimport SingleDropdown from './SingleDropdown'\r\nimport SingleDropdownMobile from './SingleDropdownMobile'\r\n\r\n\r\n\r\nconst App = ({  cards, filterTypes, onFindCard, onGetCards, onToggleMobile, onSelectedDistrict, onSelectedPrice, onToggleList, ownProps }) => {\r\n let searchInput = '';\r\n const mobileOpen = false;\r\n  const findCard = () => { onFindCard(searchInput.value) }\r\n  const toggleList = (ev, name) =>{ onToggleList(name) }\r\n  const toggleMobile = (ev, name) =>{ onToggleMobile(name) }\r\n  const selectedDistrict = (id, key, value) => { onSelectedDistrict(id, key, value) }\r\n  const selectedPrice = (id, key, value) => { onSelectedPrice(id, key, value) }\r\n\r\n  let image_Style = (a) => {return { backgroundSize: \"cover\",display: \"block\",height: \"100%\", backgroundImage: \"url(/uploads/\" +  a  + \")\" }}\r\n      return (\r\n      <div className=\"Cards\">\r\n        <div className=\"fields\" >\r\n          <div className=\"row blueb\">\r\n              <div className=\"container\">\r\n                <div className=\"col-lg-12 col-xs-12 flex cardsearch\">\r\n                  <input type=\"text\" onChange={findCard} ref={(input) => { searchInput = input}} />\r\n                  <button onClick={findCard}> <img alt=\"search\" src=\"/brief/magnifying-glass.svg\" /> </button>\r\n                </div>\r\n              <div className=\"dropdown_menu onlydesk\">\r\n                <SingleDropdown filterTypes={filterTypes} Icon={PlaceIcon} toggleList={toggleList} selectedOption={selectedDistrict} field={\"districts\"} />\r\n                <SingleDropdown filterTypes={filterTypes} Icon={PriceIcon} toggleList={toggleList} selectedOption={selectedPrice}    field={\"prices\"} />\r\n                <SingleDropdown filterTypes={filterTypes} Icon={ReduceIcon} toggleList={toggleList} selectedOption={selectedDistrict} field={\"spaces\"} />\r\n                <SingleDropdown filterTypes={filterTypes} Icon={CountingIcon} toggleList={toggleList} selectedOption={selectedDistrict} field={\"rooms\"} />\r\n              </div>\r\n              <div className=\"dropdown_proto\">\r\n                {/* <DropdownProto /> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <LoopHeading />\r\n        <div className=\"container\">\r\n\r\n          <div className=\"mobile_filters onlymob\"><button className={filterTypes.toggleMobile ? 'toggled btn' : 'untoggled btn'} onClick={(ev) => toggleMobile(ev, filterTypes.mobileOpen)} className=\"btn\">Фильтры<FontAwesome name=\"filter\"/></button></div>\r\n          <div className=\"dropdown_menu onlymob\">\r\n            <button className=\"close\"><FontAwesome name=\"times\"/></button>\r\n          <div className=\"dropdown_bearer\">\r\n            <div className=\"col-lg-12 col-xs-12 flex cardsearch\">\r\n              <input type=\"text\" placeholder=\"Поиск\" onChange={findCard} ref={(input) => { searchInput = input}} />\r\n              <button onClick={findCard}><img alt=\"search\" src=\"/brief/magnifying-glass.svg\" /> </button>\r\n            </div>\r\n\r\n            <div className=\"mobile_filter\">  <SingleDropdownMobile filterTypes={filterTypes} Icon={PlaceIcon} toggleList={toggleList} selectedOption={selectedDistrict} field={\"districts\"} />    </div>\r\n            <div className=\"mobile_filter\">  <SingleDropdownMobile filterTypes={filterTypes} Icon={PriceIcon} toggleList={toggleList} selectedOption={selectedPrice}    field={\"prices\"} />    </div>\r\n            <div className=\"mobile_filter\">  <SingleDropdownMobile filterTypes={filterTypes} Icon={ReduceIcon} toggleList={toggleList} selectedOption={selectedDistrict} field={\"spaces\"} />    </div>\r\n            <div className=\"mobile_filter\">  <SingleDropdownMobile filterTypes={filterTypes} Icon={CountingIcon} toggleList={toggleList} selectedOption={selectedDistrict} field={\"rooms\"} />    </div>\r\n\r\n            <button className=\"search\">Поиск</button>\r\n\r\n\r\n          </div>\r\n          </div>\r\n\r\n        <div className=\"row\">\r\n          {\r\n          cards.map((card, index) =>\r\n            <div key={index} className=\"col-md-3 col-sm-6\">\r\n              <div>\r\n              <div className=\"el_card\">\r\n                <div className=\"image_c\">\r\n                  <a href={'/doma/' + card.page_link}   style={image_Style(card.home_background)}>\r\n                  </a>\r\n                </div>\r\n                <div className=\"panel bordered\">\r\n                  <div className=\"installments_icon\" id=\"installments_icon\"><img alt=\"search\" src=\"/brief/icons8-money-52.png\" /></div>\r\n                  <a href=\"/doma/zhknagagarinskomplato\">\r\n                    <h4>{card.title}</h4>\r\n                    <p> {card.address}</p>\r\n                    <span>\r\n                    <span className=\"svg_price\">\r\n                     <MoneyIcon /></span>\r\n                     <span className=\"bold\">от {card.prices_start_at_per_meter}  у.е./м<sup>2</sup></span></span>\r\n                    <span><span className=\"svg_calendar\"><CalendarIcon /> </span>{convert_quarter_string(card.house_deploy_date)}</span>\r\n                    Узнать подробнее <i className=\"fa fa-arrow-right\"></i>\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            </div>\r\n        )}\r\n        </div>\r\n        </div>\r\n        <div style={({ display: 'none' })} >\r\n          <button id=\"getcard\" onClick={onGetCards}>Get cards</button>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\n\r\nconst undef_or_NaN = (el) => {\r\n  if (el === 'NaN')   return true\r\n  if (isNaN((el)) && typeof el === 'undefined' ) {\r\n    return true\r\n  } return false\r\n}\r\n\r\nconst correct_choice = (chosen = [], i) => {\r\n  if (i.selected !== false)\r\n  if (typeof i.value === 'string')\r\n    chosen.push(i.value)\r\n  else\r\n    chosen = i.value\r\n    return chosen\r\n}\r\n\r\nconst districtsFilter = (state, card) => {\r\n  let chosen;\r\n  chosen = []\r\n  state.lists.filterTypes.districts.options.forEach( i => {\r\n    if (i.selected !== false)\r\n    if (typeof i.value === 'string')\r\n  {    chosen.push(i.value) }\r\n    else\r\n    {  chosen = i.value; }\r\n  })\r\n  return Boolean(chosen.includes(card.block))\r\n}\r\n\r\nconst priceFilter = (state, card) => {\r\n  let chosen = []\r\n  state.lists.filterTypes.prices.options.map( i => {\r\n  chosen = correct_choice(chosen, i)\r\n  })\r\n  let bool = Number(JSON.parse(card.prices)[1].text) < chosen[1]\r\n  return bool\r\n}\r\n\r\nconst correctNumber = (incorrectNum) => {\r\n  if (!undef_or_NaN(incorrectNum))\r\nreturn Number(incorrectNum.replace(',', '.'))\r\nelse\r\nreturn incorrectNum\r\n}\r\n\r\nconst spaceFilter = (state, card) => {\r\n  let chosen = []\r\n  state.lists.filterTypes.spaces.options.map( i => {\r\n      if (i.selected !== false) {\r\n      chosen.push(i.value)\r\n      }\r\n  })\r\n  let bool = false\r\n  let prices = JSON.parse(card.prices)\r\n  let spaces = [ correctNumber(prices[0].text),\r\n                 correctNumber(prices[2].text),\r\n                 correctNumber(prices[4].text) ]\r\n                 if (chosen.length === 1){\r\n\r\n           if (chosen[0][0] < spaces[0] && spaces[0] < chosen[0][1] ) bool = true\r\n           if (chosen[0][0] < spaces[1] && spaces[1] < chosen[0][1] ) bool = true\r\n           if (chosen[0][0] < spaces[2] && spaces[2] < chosen[0][1] ) bool = true\r\n           if (undef_or_NaN(spaces[0]) || undef_or_NaN(spaces[1]) || undef_or_NaN(spaces[2])) bool = true\r\n            if (!bool) {\r\n              console.log(chosen[0][0] ,'<', spaces[0] ,'&&', spaces[0] ,'<', chosen[1]);\r\n\r\n            }\r\n         } else {\r\n           chosen.map( e => {\r\n             if (e[0] < spaces[0] && spaces[0] < e[1] ) bool = true\r\n             if (e[0] < spaces[1] && spaces[1] < e[1] ) bool = true\r\n             if (e[0] < spaces[2] && spaces[2] < e[1] ) bool = true\r\n             if (undef_or_NaN(spaces[0]) || undef_or_NaN(spaces[1]) || undef_or_NaN(spaces[2])) bool = true\r\n           })\r\n         }\r\nreturn bool\r\n}\r\n\r\nconst roomFilter = (state, card) => {\r\n  let chosen = []\r\n  let availability = {}\r\n    let prices = JSON.parse(card.prices)\r\n  state.lists.filterTypes.rooms.options.map( i => {\r\n    if (i.selected !== false)\r\n    if(i.value.length < 2)\r\n      chosen.push(i.value)\r\n    else\r\n    chosen = i.value\r\n  });\r\n  (isNaN(correctNumber(prices[0].text)) || isNaN(correctNumber(prices[1].text))) ?  availability[0] = false : availability[0] = true;\r\n  (isNaN(correctNumber(prices[2].text)) || isNaN(correctNumber(prices[3].text))) ?  availability[1] = false : availability[1] = true;\r\n  (isNaN(correctNumber(prices[4].text)) || isNaN(correctNumber(prices[5].text))) ?  availability[2] = false : availability[2] = true;\r\nlet bool = false\r\nfor (let prop in chosen) {\r\n  if (availability[chosen[prop] - 1] === true) bool = true\r\n  }\r\n  if (!bool) {\r\n    console.log(card.title, availability);\r\n  }\r\nreturn bool\r\n}\r\n\r\nexport default connect(\r\n  (state, ownProps) => ({\r\n    cards: state.cards\r\n      .filter(\r\n        card => card.note_type === 'Объект' &&\r\n        card.title.toLowerCase().includes(state.filterCards.toLowerCase())\r\n        && districtsFilter(state, card)\r\n        && priceFilter(state, card)\r\n        && spaceFilter(state, card)\r\n        && roomFilter(state, card)\r\n      ),\r\n  filterTypes: state.lists.filterTypes,\r\n  ownProps\r\n  }),\r\n  dispatch => ({\r\n    onFindCard : (task) => {\r\n      dispatch({ type: 'FIND_CARD', payload: task})\r\n    },\r\n    onGetCards: () => {\r\n        dispatch(getCards())\r\n    },\r\n    onToggleList : (payload) => {\r\n      dispatch({ type: 'TOGGLE_LIST', payload: payload})\r\n    },\r\n    onToggleMobile : (name) => {\r\n      dispatch({ type: 'TOGGLE_MOBILE', payload: name})\r\n    },\r\n    onSelectedDistrict : (id, key, value) => {\r\n      dispatch({ type: 'TOGGLE_SELECTED_ITEM', payload: {id:id, key:key}})\r\n      dispatch({ type: 'FILTER_BY_LISTS', payload: {id:id, value:value}})\r\n    },\r\n    onSelectedPrice : (id, key, value) => {\r\n      dispatch({ type: 'TOGGLE_SELECTED_ITEM', payload: {id:id, key:key}})\r\n}\r\n  }),\r\n)(App);\r\n"]},"metadata":{},"sourceType":"module"}