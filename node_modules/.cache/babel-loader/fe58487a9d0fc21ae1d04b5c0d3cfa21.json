{"ast":null,"code":"import _classCallCheck from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _regeneratorRuntime from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\node\\\\react_bookshelf\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"F:\\\\node\\\\react_bookshelf\\\\src\\\\addBookForm.js\";\nimport React, { Component } from 'react';\n\nvar sendImage =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(file) {\n    var image, fetchConf, response, body;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            image = new FormData();\n            image.append('image', file);\n            fetchConf = {\n              method: 'POST',\n              files: image,\n              body: image,\n              cache: 'default'\n            };\n            _context.next = 5;\n            return fetch('http://localhost:2000/upload', fetchConf);\n\n          case 5:\n            response = _context.sent;\n            _context.next = 8;\n            return response.json();\n\n          case 8:\n            body = _context.sent;\n            if (response.status !== 200) console.log('Error', body);\n            return _context.abrupt(\"return\", body.images);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function sendImage(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar formSubmit =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(data) {\n    var fetchConf, response, body;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            fetchConf = {\n              method: 'POST',\n              headers: {\n                'Content-type': 'application/json'\n              },\n              body: data,\n              cache: 'default'\n            };\n            _context2.next = 3;\n            return fetch('http://localhost:2000/books', fetchConf);\n\n          case 3:\n            response = _context2.sent;\n            _context2.next = 6;\n            return response.json();\n\n          case 6:\n            body = _context2.sent;\n            if (response.status !== 200) console.log('Error', body);\n            return _context2.abrupt(\"return\", body.images);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function formSubmit(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar NameForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NameForm, _React$Component);\n\n  function NameForm(props) {\n    var _this;\n\n    _classCallCheck(this, NameForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NameForm).call(this, props));\n    _this.state = {\n      title: '',\n      author: '',\n      bookfile: ''\n    };\n    _this.handleTitle = _this.handleTitle.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleAuthor = _this.handleAuthor.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(NameForm, [{\n    key: \"handleTitle\",\n    value: function handleTitle(event) {\n      this.setState({\n        title: event.target.value\n      });\n    }\n  }, {\n    key: \"handleAuthor\",\n    value: function handleAuthor(event) {\n      this.setState({\n        author: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      // formSubmit(this.state)\n      console.log(this.state.json());\n      event.preventDefault();\n    }\n  }, {\n    key: \"readFile\",\n    value: function readFile(event) {\n      var _this2 = this;\n\n      sendImage(event.target.files[0]).then(function (file) {\n        _this2.setState({\n          bookfile: file[0].url\n        });\n      });\n      event.preventDefault();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"form\", {\n        className: \"books_add\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form_group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \" Title\"), React.createElement(\"input\", {\n        name: \"title\",\n        type: \"text\",\n        value: this.state.title,\n        onChange: function onChange(event) {\n          _this3.handleTitle(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form_group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \" author\"), React.createElement(\"input\", {\n        name: \"author\",\n        type: \"text\",\n        value: this.state.author,\n        onChange: function onChange(event) {\n          _this3.handleAuthor(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form_group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \" bookfile\"), React.createElement(\"input\", {\n        id: \"fileupload\",\n        name: \"bookfile\",\n        ref: \"upload\",\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: function onChange(event) {\n          _this3.readFile(event);\n        },\n        onClick: function onClick(event) {\n          event.target.value = null;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form_group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \" submit\"), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return NameForm;\n}(React.Component);\n\nexport default NameForm;","map":{"version":3,"sources":["F:\\node\\react_bookshelf\\src\\addBookForm.js"],"names":["React","Component","sendImage","file","image","FormData","append","fetchConf","method","files","body","cache","fetch","response","json","status","console","log","images","formSubmit","data","headers","NameForm","props","state","title","author","bookfile","handleTitle","bind","handleAuthor","handleSubmit","event","setState","target","value","preventDefault","then","url","readFile"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,IAAMC,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZC,YAAAA,KADY,GACJ,IAAIC,QAAJ,EADI;AAEdD,YAAAA,KAAK,CAACE,MAAN,CAAa,OAAb,EAAsBH,IAAtB;AACEI,YAAAA,SAHY,GAGA;AAAEC,cAAAA,MAAM,EAAE,MAAV;AACfC,cAAAA,KAAK,EAAEL,KADQ;AAEfM,cAAAA,IAAI,EAAEN,KAFS;AAGfO,cAAAA,KAAK,EAAE;AAHQ,aAHA;AAAA;AAAA,mBAOQC,KAAK,CAAC,8BAAD,EAAiCL,SAAjC,CAPb;;AAAA;AAOTM,YAAAA,QAPS;AAAA;AAAA,mBAQCA,QAAQ,CAACC,IAAT,EARD;;AAAA;AAQZJ,YAAAA,IARY;AASlB,gBAAIG,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6BC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAsBP,IAAtB;AATX,6CAUVA,IAAI,CAACQ,MAVK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAThB,SAAS;AAAA;AAAA;AAAA,GAAf;;AAcA,IAAMiB,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG,kBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACbb,YAAAA,SADa,GACD;AAAEC,cAAAA,MAAM,EAAE,MAAV;AAChBa,cAAAA,OAAO,EAAE;AACH,gCAAgB;AADb,eADO;AAIfX,cAAAA,IAAI,EAAEU,IAJS;AAKfT,cAAAA,KAAK,EAAE;AALQ,aADC;AAAA;AAAA,mBAOOC,KAAK,CAAC,6BAAD,EAAgCL,SAAhC,CAPZ;;AAAA;AAOVM,YAAAA,QAPU;AAAA;AAAA,mBAQAA,QAAQ,CAACC,IAAT,EARA;;AAAA;AAQbJ,YAAAA,IARa;AASnB,gBAAIG,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6BC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAsBP,IAAtB;AATV,8CAUXA,IAAI,CAACQ,MAVM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVC,UAAU;AAAA;AAAA;AAAA,GAAhB;;IAaMG,Q;;;;;AACJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AAACC,MAAAA,KAAK,EAAE,EAAR;AAAWC,MAAAA,MAAM,EAAE,EAAnB;AAAsBC,MAAAA,QAAQ,EAAE;AAAhC,KAAb;AACA,UAAKC,WAAL,GAAmB,MAAKA,WAAL,CAAiBC,IAAjB,uDAAnB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,uDAApB;AACA,UAAKE,YAAL,GAAoB,MAAKA,YAAL,CAAkBF,IAAlB,uDAApB;AALiB;AAMlB;;;;gCACWG,K,EAAO;AACjB,WAAKC,QAAL,CAAc;AAACR,QAAAA,KAAK,EAAEO,KAAK,CAACE,MAAN,CAAaC;AAArB,OAAd;AACD;;;iCACYH,K,EAAO;AAClB,WAAKC,QAAL,CAAc;AAACP,QAAAA,MAAM,EAAEM,KAAK,CAACE,MAAN,CAAaC;AAAtB,OAAd;AACD;;;iCACYH,K,EAAO;AAChB;AACNhB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKO,KAAL,CAAWV,IAAX,EAAZ;AACIkB,MAAAA,KAAK,CAACI,cAAN;AACD;;;6BACQJ,K,EAAO;AAAA;;AACd9B,MAAAA,SAAS,CAAC8B,KAAK,CAACE,MAAN,CAAazB,KAAb,CAAmB,CAAnB,CAAD,CAAT,CAAiC4B,IAAjC,CAAsC,UAAAlC,IAAI,EAAI;AACxC,QAAA,MAAI,CAAC8B,QAAL,CAAc;AAACN,UAAAA,QAAQ,EAAExB,IAAI,CAAC,CAAD,CAAJ,CAAQmC;AAAnB,SAAd;AACL,OAFD;AAGAN,MAAAA,KAAK,CAACI,cAAN;AACD;;;6BAIQ;AAAA;;AACP,aACE;AAAM,QAAA,SAAS,EAAC,WAAhB;AAA4B,QAAA,QAAQ,EAAE,KAAKL,YAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,IAAI,EAAC,MAAzB;AAAgC,QAAA,KAAK,EAAE,KAAKP,KAAL,CAAWC,KAAlD;AAAyD,QAAA,QAAQ,EAAE,kBAACO,KAAD,EAAU;AAAE,UAAA,MAAI,CAACJ,WAAL,CAAiBI,KAAjB;AAAyB,SAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADJ,EAKI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,IAAI,EAAC,MAA1B;AAAiC,QAAA,KAAK,EAAE,KAAKR,KAAL,CAAWE,MAAnD;AAA2D,QAAA,QAAQ,EAAE,kBAACM,KAAD,EAAU;AAAE,UAAA,MAAI,CAACF,YAAL,CAAkBE,KAAlB;AAA0B,SAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALJ,EASI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAO,QAAA,EAAE,EAAC,YAAV;AAAuB,QAAA,IAAI,EAAC,UAA5B;AAAuC,QAAA,GAAG,EAAC,QAA3C;AAAoD,QAAA,IAAI,EAAC,MAAzD;AAAgE,QAAA,MAAM,EAAC,SAAvE;AAAiF,QAAA,QAAQ,EAAE,kBAACA,KAAD,EAAU;AAAE,UAAA,MAAI,CAACO,QAAL,CAAcP,KAAd;AAAsB,SAA7H;AAA+H,QAAA,OAAO,EAAE,iBAACA,KAAD,EAAU;AAAEA,UAAAA,KAAK,CAACE,MAAN,CAAaC,KAAb,GAAqB,IAArB;AAA2B,SAA/K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CATJ,EAaI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAbJ,CADF;AAoBD;;;;EAjDoBnC,KAAK,CAACC,S;;AAsD7B,eAAeqB,QAAf","sourcesContent":["import React, { Component } from 'react';\r\n\r\nconst sendImage = async (file) => {\r\n  let image = new FormData();\r\n    image.append('image', file)\r\n  var fetchConf = { method: 'POST',\r\n   files: image,\r\n   body: image,\r\n   cache: 'default' };\r\n   const response = await fetch('http://localhost:2000/upload', fetchConf);\r\nconst body = await response.json();\r\nif (response.status !== 200) console.log('Error' , body);\r\n return body.images; };\r\n\r\n\r\n\r\nconst formSubmit = async (data) => {\r\n  var fetchConf = { method: 'POST',\r\n  headers: {\r\n        'Content-type': 'application/json'\r\n      },\r\n   body: data,\r\n   cache: 'default' };\r\n   const response = await fetch('http://localhost:2000/books', fetchConf);\r\nconst body = await response.json();\r\nif (response.status !== 200) console.log('Error' , body);\r\n return body.images; };\r\n\r\n\r\nclass NameForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {title: '',author: '',bookfile: '',};\r\n    this.handleTitle = this.handleTitle.bind(this);\r\n    this.handleAuthor = this.handleAuthor.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n  handleTitle(event) {\r\n    this.setState({title: event.target.value});\r\n  }\r\n  handleAuthor(event) {\r\n    this.setState({author: event.target.value});\r\n  }\r\n  handleSubmit(event) {\r\n      // formSubmit(this.state)\r\nconsole.log(this.state.json());\r\n    event.preventDefault();\r\n  }\r\n  readFile(event) {\r\n    sendImage(event.target.files[0]).then(file => {\r\n          this.setState({bookfile: file[0].url});\r\n    })\r\n    event.preventDefault();\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <form className=\"books_add\" onSubmit={this.handleSubmit}>\r\n          <div className=\"form_group\">\r\n            <label> Title</label>\r\n            <input name=\"title\" type=\"text\" value={this.state.title} onChange={(event)=> { this.handleTitle(event) }}/>\r\n          </div>\r\n          <div className=\"form_group\">\r\n            <label> author</label>\r\n            <input name=\"author\" type=\"text\" value={this.state.author} onChange={(event)=> { this.handleAuthor(event) }}/>\r\n          </div>\r\n          <div className=\"form_group\">\r\n            <label> bookfile</label>\r\n            <input id=\"fileupload\" name=\"bookfile\" ref=\"upload\" type=\"file\" accept=\"image/*\" onChange={(event)=> { this.readFile(event) }} onClick={(event)=> { event.target.value = null }} />\r\n          </div>\r\n          <div className=\"form_group\">\r\n            <label> submit</label>\r\n            <input type=\"submit\" />\r\n          </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default NameForm;\r\n"]},"metadata":{},"sourceType":"module"}